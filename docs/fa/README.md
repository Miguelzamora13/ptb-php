# PTB = Procedural Telegram Bot (PHP Library)

> کتابخانه PTB به پروژه شما انعطاف پذیری، مقیاس پذیری و سرعت فوق العاده می دهد

این کتابخانه از آخرین قابلیت‌های **PHP 8** بهره می‌برد و سعی می‌کند مزیت‌های **سرعت**، **قابلیت مقیاس‌پذیری** و **انعطاف‌پذیری** را برای استفاده به خوبی بهره ببرد. این کتابخانه به شما اجازه می‌دهد تا به سرعت ربات‌های ساده‌ای را ایجاد کنید، اما در عین حال، امکانات **پیشرفته‌تری** را نیز برای مدیریت حتی پیچیده‌ترین جریان‌ها فراهم می‌کند. برخی از مفاهیم معماری که بر پایه آن PTB ساخته شده است، تحت تأثیر قرارگرفته‌اند از پروژه متن باز دیگری به نام [Nutgram](https://github.com/nutgram/nutgram) است! همچنین آن را نیز بررسی کنید!

# یک مثال ساده از نحوه استفاده
```php
<?php

use function DevDasher\PTB\configurePTB;
use function DevDasher\PTB\onMessageText;
use function DevDasher\PTB\sendMessage;

// require(__DIR__.'/vendor/autoload.php'); // میتوانید از آتولودر کامپوزر استفاده کنید
require(__DIR__.'/path/to/PTB.php'); // یا به صورت مستقیم فایل اصلی را در پروژه لود کنید

/*
    این تابع برای تنظیم تنظیمات اولیه کتابخانه بوده و 
    می بایست در بالای کد و قبل از هندلر ها تعریف و فراخوانی شود
*/
configurePTB(
    token: 'TOKEN', // توکن ربات شما
    username: 'devdasherbot', // نام کاربری ربات شما
    // ...
);

/*
    این هندلر برای بررسی ورودی های متنی در نوع آپدیت
    message
    مورد استفاده قرار میگیرد
*/
onMessageText(
    # الگوی متنی خود را در اینجا وارد کنید
    pattern: '/start', 

    # تابعی که بعد از بررسی الگو در پاسخ به کاربر اجرا میشود
    callable: function() { 
        sendMessage(text: 'سلام دنیا'); // تابعی برای ارسال پیام به کاربر

        /*
            به صورت خلاصه اگر کاربر دستور
            /start
            را به ربات ارسال کند، پاسخ «سلام دنیا» به او ارسال خواهد شد
        */
    },
);

# در اینجا یک مثال دیگر را باهم بررسی میکنیم
onMessageText(
    # الگوی متنی به همراه یک متغیر
    pattern: 'اسم من {name} است', 
    
    # تابعی که بعد از بررسی الگو در پاسخ به کاربر اجرا میشود
    callable: function($name) { // دقت کنید که متغیر مربوطه را در پارامتر تابع دریافت میکنید
        sendMessage(text: "سلام $name");

        /*
            به صورت خلاصه اگر کاربر متن زیر را ارسال کند:
            «اسم من پوریا است»
            ربات نیز پاسخ «سلام پوریا» را در جواب به کاربر ارسال خواهد کرد
        */
    },
);

/*
    این تابع همیشه باید آخر کد (بعد از هندلر ها) قرار داشته باشد
    بعد از فراخوانی شدن این تابع، کتابخانه هندلر های موجود را بررسی
    و متناسب با آن کد های مربوطه را اجرا و پاسخ مناسب را به کاربر ارسال میکند
    پاسخی که شما در یک تابع ناشناس در هندلر های قبلی تعیین کرده اید
*/
run();


```
# چرا برنامه نویسی رویه‌ای (Procedural) و نه شیءگرا (OOP)؟
برنامه نویسی رویه‌ای به دلیل کمترین هزینه و تعداد عملیات مورد نیاز برای اجرا، به طور معمول سریع‌تر از برنامه نویسی شیءگرا (OOP) در نظر گرفته می‌شود. در برنامه نویسی رویه‌ای، تمرکز بر نوشتن دستورات متوالی به صورت گام به گام برای انجام یک وظیفه است. این رویکرد به اجرای کارآمد اجازه می‌دهد زیرا برنامه با استفاده از دستورات ساده، مستقیماً بر روی داده‌ها عمل می‌کند.

یکی از عوامل کلیدی که به سرعت واحساس شده برنامه نویسی رویه‌ای کمک می‌کند، تعداد کاهش یافته OPcodes (کدهای عملیات) مربوط است. OPcodes دستورات بنیادی هستند که توسط سخت‌افزار رایانه درک می‌شوند و عملیات خاصی مانند محاسبات حسابی یا دسترسی به حافظه را تعریف می‌کنند. از آنجا که برنامه‌های رویه‌ای به طور معمول شامل لایه‌های کمتری از انتزاع و مدیریت مستقیم داده هستند، به تعداد کمتری از OPcodes برای دستیابی به یک عملکرد خاص نیاز دارند.

در مقابل، برنامه نویسی شیءگرا از طریق مفاهیمی مانند کلاس‌ها، اشیاء و ارث‌بری، لایه‌های پیچیدگی اضافی را معرفی می‌کند. این ویژگی‌ها بهره‌وری مانند قابلیت استفاده مجدد کد، مدولاریت و قابلیت نگهداری را فراهم می‌کنند، اما همچنین ممکن است بار عملیاتی اضافی را به همراه داشته باشند. برنامه‌های شیءگرا اغلب شامل تعاملات پیچیده‌تری بین اشیاء هستند که ممکن است به مراحل پردازش و سطوح میانی بیشتری نیاز داشته باشد. این عوامل می‌توانند منجر به اجرایی کمی کندتر نسبت به برنامه‌های رویه‌ای شوند، به خصوص در حالت‌هایی که عملکرد بحرانی است و ویژگی‌های اضافی شیءگرا به طور قابل استفاده نیستند.

مهم است توجه داشت که تفاوت عملکرد بین رویه‌ای و شیءگرا به متناسب با شرایط و عوامل مختلفی است که شامل زبان برنامه نویسی مورد استفاده، کارایی کامپایلر یا مفسر، انتخاب‌های طراحی صورت گرفته و ماهیت مسئله‌ای که حل می‌شود، می‌شود. بنابراین، اگرچه برنامه نویسی رویه‌ای به دلیل مدل اجرایی ساده و استفاده کمتری از OPcodes به عنوان سریع‌تر درک می‌شود، اما این یک قانون قطعی نیست و شیءگرا می‌تواند مزایای قابل توجهی را در جهت سازماندهی کدها، قابلیت نگهداری و امکان‌سنجی ارائه دهد.

# داکیومنت
این کتابخانه همواره در حال به روز رسانی می باشد و در حال حاضر دارای قابلیت های بسیار زیادی است.  
بعدا این بخش را تکمیل خواهیم کرد

# نحوه نصب
شما می‌توانید کتابخانه را از طریق composer نصب کنید:

```bash
composer require devdasher/ptb-php
```

و یا میتوانید صرفا فایل اصلی کتابخانه یعنی PTB.php را در کد PHP خود لود کنید

# تغییرات
لطفاً فایل [CHANGELOG](CHANGELOG.md) را برای کسب اطلاعات بیشتر در مورد تغییرات اخیر مشاهده کنید.

# همکاران
- [Pooria Bashiri](https://github.com/devdahser)
- [All Contributors](../../contributors)

# مجوز
مجوز GNU (GNU v3). لطفاً برای کسب اطلاعات بیشتر به [فایل مجوز](LICENSE.md) مراجعه کنید.





